<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="alerting, monitoring, alert, monitor">
    <!-- disable auto fresh every 60 seconds -->
    <!--
    <meta http-equiv="refresh" content="60">
    -->

    <title>期货量化交易数据平台浅谈</title>
    <link rel="stylesheet" href="/theme/css/bootstrap.min.css" >
    <link rel="stylesheet" href="/theme/css/dashboard.css" >
    <link rel="stylesheet" type="text/css" href="/theme/css/style.css" />

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/theme/js/html5shiv.js" type="text/javascript"></script>
    <script src="/theme/js/respond.js" type="text/javascript"></script>
    <![endif]-->

  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="/" style="border-bottom: 0px;">杨昌明的Blog </a>
        </div>
      </div>
    </div>

    <div  class="container-fluid">
        <div class="row">
            <div class="col-sm-12  col-md-12 main">
                <div id="content">
<article>
    <header>
        <h3 class="article-title">
            期货量化交易数据平台浅谈
            <!--<a href="/pages/trading" rel="bookmark" title="Permalink to 期货量化交易数据平台浅谈">期货量化交易数据平台浅谈</a>-->
        </h3>
        <hr/>
        <div class="article-info">
            日期:&nbsp;2019-02-17&nbsp;|&nbsp;关注我:&nbsp;<a href="http://weibo.com/changmingy" target="_blank">新浪微博</a>
        </div>
    </header>

    <div class="article-content">
        <h2>量化交易介绍</h2>
<p>量化交易是用数学模型替代人为的主观判断，利用计算机技术从庞大的历史数据中海选能带来超额收益的多种“大概率”事件以制定策略，主要就是用计算机来代替人类做主观判断；这里我们主要讨论普通商品期货。</p>
<h3>数学模型</h3>
<p>多因子线性模型（目前都是基于Tick数据进行预测）</p>
<p><img alt="" src="/theme/images/15498786839912.jpg"></p>
<p>X: 影响收益率的因素 - 因子
A: 每个因素的权重 - 系数</p>
<p><strong>因子</strong>计算基于历史行情的价格数据和成交量数据得出，如下公式：</p>
<p><img alt="" src="/theme/images/15498787534020.jpg"></p>
<p><strong>系数</strong>计算基于历史行情数据进行训练，也就是进行尝试，即代入不同的预先设定系数值进行计算，计算结果越接近观测值，视为最优解。</p>
<h2>存储平台</h2>
<p><img alt="" src="/theme/images/15500428561940.jpg"></p>
<h3>数据量</h3>
<div class="highlight"><pre><span></span>15个节点，每天接收1G左右数据，2010-2017年总数据量大概1T左右，2010-2017年hbase数据总量1亿条左右
</pre></div>


<h3>行情网关实现要点</h3>
<p>500毫秒一个tick数据</p>
<p>多线程异步写入kafka</p>
<p>数据清洗和过滤逻辑，时间戳补齐，品种名称统一等等</p>
<p>hbase的表名依据期货品种名称，key设计依据数据毫秒时间戳，利于业务数据操作</p>
<p><img alt="" src="/theme/images/15503854504009.jpg"></p>
<h3>数据的批量导入</h3>
<p>历史批量数据导入，使用BulkLoad快速导入HBase中</p>
<p><img alt="" src="/theme/images/15503860892368.jpg"></p>
<h3>日志</h3>
<p>平台在生产过程中，产生大量日志，其中zookeeper的日志较多，通过脚本定时清理。</p>
<h3>监控</h3>
<p>Ambari来监控所有硬件资源和软件服务，较好的ui方便数据平台的管理。</p>
<p><img alt="" src="/theme/images/15503889213049.jpg"></p>
<h2>计算平台Spark</h2>
<p>因子和权重系数计算使用spark计算平台，10个节点，从21分钟优化到2.7分钟</p>
<p><img alt="" src="/theme/images/15500450680920.jpg"></p>
<p><img alt="" src="/theme/images/15500451009690.jpg"></p>
    </div>


</article>
                </div>
            </div>
        </div>
    </div>


    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/theme/js/jquery.min.js"></script>
    <script src="/theme/js/bootstrap.min.js"></script>

    <!-- svg JavaScript================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/javascript" src="/theme/js/svg.jquery.js"></script>
    <script type="text/javascript" src="/theme/js/pygal-tooltips.js"></script>

  </body>
</html>